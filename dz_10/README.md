# Домашнее задание 10. Мусаев Умахан Рашидович.

Данное приложение реализует клиент-серверное взаимодействие с использованием протокола UDP. Оно поддерживает два режима работы:
1. **Широковещательная рассылка** (Broadcast): Сервер отправляет сообщения всем клиентам в локальной сети.
2. **Многоадресная рассылка** (Multicast): Сервер отправляет сообщения группе клиентов, подписанных на определённый многоадресный IP-адрес.

## Используемые библиотеки и методы

### Общие библиотеки
- **`<iostream>`**: Для работы с вводом/выводом (например, `std::cout` и `std::cin`).
- **`<cstring>`**: Для работы с функцией `memset`, которая очищает структуры данных.
- **`<sys/socket.h>`**: Для создания и управления сокетами (например, `socket`, `sendto`, `recvfrom`).
- **`<netinet/in.h>`**: Для работы с сетевыми структурами, такими как `sockaddr_in`.
- **`<arpa/inet.h>`**: Для преобразования IP-адресов (например, `inet_addr`).
- **`<unistd.h>`**: Для работы с системными вызовами, такими как `close`.


  ### Сервер (Broadcast)
#### Методы:
1. **`socket(AF_INET, SOCK_DGRAM, 0)`**:
   - Создаёт UDP-сокет.
2. **`setsockopt(sockfd, SOL_SOCKET, SO_BROADCAST, ...)`**:
   - Включает возможность широковещательной отправки.
3. **`memset(&broadcastAddr, 0, sizeof(broadcastAddr))`**:
   - Очищает структуру `sockaddr_in` перед её использованием.
4. **`inet_addr(BROADCAST_IP)`**:
   - Преобразует строку с IP-адресом в формат, используемый в сетевых функциях.
5. **`sendto(sockfd, message, strlen(message), 0, ...)`**:
   - Отправляет сообщение на указанный адрес.
6. **`close(sockfd)`**:
   - Закрывает сокет.

---

### Клиент (Broadcast)
#### Методы:
1. **`socket(AF_INET, SOCK_DGRAM, 0)`**:
   - Создаёт UDP-сокет.
2. **`memset(&serverAddr, 0, sizeof(serverAddr))`**:
   - Очищает структуру `sockaddr_in`.
3. **`bind(sockfd, (struct sockaddr*)&serverAddr, sizeof(serverAddr))`**:
   - Привязывает сокет к локальному адресу и порту.
4. **`recvfrom(sockfd, buffer, sizeof(buffer), 0, ...)`**:
   - Получает сообщение, отправленное сервером.
5. **`close(sockfd)`**:
   - Закрывает сокет.

---

### Сервер (Multicast)
#### Методы:
1. **`socket(AF_INET, SOCK_DGRAM, 0)`**:
   - Создаёт UDP-сокет.
2. **`memset(&multicastAddr, 0, sizeof(multicastAddr))`**:
   - Очищает структуру `sockaddr_in`.
3. **`inet_addr(MULTICAST_IP)`**:
   - Преобразует строку с многоадресным IP-адресом в сетевой формат.
4. **`sendto(sockfd, message, strlen(message), 0, ...)`**:
   - Отправляет сообщение на многоадресный адрес.
5. **`close(sockfd)`**:
   - Закрывает сокет.

---

### Клиент (Multicast)
#### Методы:
1. **`socket(AF_INET, SOCK_DGRAM, 0)`**:
   - Создаёт UDP-сокет.
2. **`memset(&localAddr, 0, sizeof(localAddr))`**:
   - Очищает структуру `sockaddr_in`.
3. **`bind(sockfd, (struct sockaddr*)&localAddr, sizeof(localAddr))`**:
   - Привязывает сокет к локальному адресу и порту.
4. **`setsockopt(sockfd, IPPROTO_IP, IP_ADD_MEMBERSHIP, ...)`**:
   - Присоединяет сокет к многоадресной группе.
5. **`recvfrom(sockfd, buffer, sizeof(buffer), 0, ...)`**:
   - Получает сообщение, отправленное сервером.
6. **`setsockopt(sockfd, IPPROTO_IP, IP_DROP_MEMBERSHIP, ...)`**:
   - Удаляет сокет из многоадресной группы.
7. **`close(sockfd)`**:
   - Закрывает сокет.

## Описание работы программ

### Сервер
Серверная программа:
- Создаёт UDP-сокет.
- В режиме **Broadcast** отправляет сообщения на широковещательный адрес `255.255.255.255`.
- В режиме **Multicast** отправляет сообщения на многоадресный IP-адрес `239.255.255.250`.
- Сообщения вводятся пользователем в консоли и отправляются клиентам.

### Клиент
Клиентская программа:
- Создаёт UDP-сокет.
- В режиме **Broadcast** принимает сообщения, отправленные сервером на широковещательный адрес.
- В режиме **Multicast** подписывается на многоадресную группу и принимает сообщения, отправленные сервером.

## Компиляция программ
Для компиляции серверной и клиентской программ выполните следующие команды:

`g++ -o broadcast_server broadcast_server.cpp g++ -o broadcast_client broadcast_client.cpp`
`g++ -o multicast_server multicast_server.cpp g++ -o multicast_client multicast_client.cpp`

## Запуск программ

### Широковещательная рассылка (Broadcast)
1. Запустите сервер:
   `./broadcast_server`
2. Запустите клиента (на том же или другом компьютере в локальной сети):
`./broadcast_client`


### Многоадресная рассылка (Multicast)
1. Запустите сервер:
`./multicast_server`
2. Запустите клиента (на том же или другом компьютере в локальной сети):
`./multicast_client`
